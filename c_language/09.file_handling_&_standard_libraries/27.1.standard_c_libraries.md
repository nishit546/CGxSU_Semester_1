# 27: Standard C Libraries

C becomes truly powerful when you use its **standard libraries**. Instead of writing everything from scratch, you can leverage prebuilt functions in headers like `<math.h>`, `<stdlib.h>`, and `<time.h>`. These provide mathematical tools, memory utilities, random number generation, and time handling.

This article covers:

* `<math.h>` → `sqrt`, `pow`, `sin`
* `<stdlib.h>` → `rand`, `srand`, `atoi`, `exit`
* `<time.h>` → random seeds, time functions

---

## 1) `<math.h>`: Math Functions

The `<math.h>` header provides mathematical functions like square root, power, trigonometry, etc.
**Linking note**: On some compilers (like GCC), you may need `-lm` when compiling (e.g., `gcc prog.c -lm`).

### 1.1 `sqrt` – Square root

```c
#include <stdio.h>
#include <math.h>

int main() {
    double x = 25.0;
    printf("sqrt(%.2f) = %.2f\n", x, sqrt(x));
    return 0;
}
```

**Output**

```
sqrt(25.00) = 5.00
```

---

### 1.2 `pow` – Power function

```c
#include <stdio.h>
#include <math.h>

int main() {
    printf("2^3 = %.2f\n", pow(2, 3));      // 8.00
    printf("5^0.5 = %.2f\n", pow(5, 0.5));  // sqrt(5)
    return 0;
}
```

---

### 1.3 `sin` – Trigonometric sine

Trigonometric functions in `<math.h>` expect **radians**, not degrees.

```c
#include <stdio.h>
#include <math.h>

int main() {
    double angle_deg = 30.0;
    double angle_rad = angle_deg * M_PI / 180.0; // Convert degrees → radians
    printf("sin(30°) = %.2f\n", sin(angle_rad));
    return 0;
}
```

**Output**

```
sin(30°) = 0.50
```

---

## 2) `<stdlib.h>`: Utilities

The `<stdlib.h>` header contains many functions. We’ll focus on **random numbers, conversions, and program exit**.

### 2.1 `rand` – Generate pseudo-random numbers

```c
#include <stdio.h>
#include <stdlib.h>

int main() {
    for (int i = 0; i < 5; i++) {
        printf("%d\n", rand()); // random int between 0 and RAND_MAX
    }
    return 0;
}
```

### 2.2 `srand` – Seed the random generator

If you don’t seed, `rand()` will give the **same sequence** each run.
Use `srand` with a changing seed (e.g., time).

```c
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

int main() {
    srand(time(NULL));  // seed with current time
    for (int i = 0; i < 5; i++) {
        printf("%d\n", rand() % 100); // random between 0–99
    }
    return 0;
}
```

---

### 2.3 `atoi` – Convert string to integer

```c
#include <stdio.h>
#include <stdlib.h>

int main() {
    char str1[] = "123";
    char str2[] = "45abc"; // stops at first non-digit
    printf("atoi(\"%s\") = %d\n", str1, atoi(str1));
    printf("atoi(\"%s\") = %d\n", str2, atoi(str2)); 
    return 0;
}
```

**Output**

```
atoi("123") = 123
atoi("45abc") = 45
```

---

### 2.4 `exit` – Terminate program

```c
#include <stdio.h>
#include <stdlib.h>

int main() {
    FILE *fp = fopen("data.txt", "r");
    if (!fp) {
        printf("File not found, exiting...\n");
        exit(1); // terminate with error code
    }
    printf("File opened successfully!\n");
    fclose(fp);
    return 0;
}
```

---

## 3) `<time.h>`: Time & Random Seeds

### 3.1 `time` – Get current epoch time

```c
#include <stdio.h>
#include <time.h>

int main() {
    time_t now = time(NULL);
    printf("Seconds since Jan 1, 1970 = %ld\n", (long)now);
    return 0;
}
```

---

### 3.2 `ctime` – Human-readable time

```c
#include <stdio.h>
#include <time.h>

int main() {
    time_t now = time(NULL);
    printf("Current time: %s", ctime(&now)); // ctime adds newline
    return 0;
}
```

---

### 3.3 `localtime` + `strftime` – Custom format

```c
#include <stdio.h>
#include <time.h>

int main() {
    time_t now = time(NULL);
    struct tm *info = localtime(&now);

    char buf[64];
    strftime(buf, sizeof buf, "%d-%m-%Y %H:%M:%S", info);
    printf("Formatted time: %s\n", buf);

    return 0;
}
```

**Output (example)**

```
Formatted time: 22-08-2025 02:15:30
```

---

## 4) Putting It Together (Mini Example)

Random quiz generator using `<stdlib.h>` + `<time.h>` + `<math.h>`

```c
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <math.h>

int main() {
    srand(time(NULL)); // seed once

    int a = rand() % 10 + 1; // 1–10
    int b = rand() % 10 + 1;

    printf("Question: sqrt(%d^2 + %d^2) = ?\n", a, b);

    double ans = sqrt(pow(a,2) + pow(b,2));
    printf("Answer: %.2f\n", ans);

    return 0;
}
```

**Sample run**

```
Question: sqrt(3^2 + 4^2) = ?
Answer: 5.00
```

---

## 5) Quick Recap

* `<math.h>` → `sqrt`, `pow`, `sin`, etc. (watch for radians).
* `<stdlib.h>` → random (`rand`, `srand`), string-to-int (`atoi`), program control (`exit`).
* `<time.h>` → get current time, format with `strftime`, seed randoms.
* Combine them for **math-heavy, random-based, or time-aware programs**.

---
