# 24.2 Difference between Structure and Union in C

Both **structures** and **unions** in C are **user-defined data types** that group different data members under a single name.
However, they differ **fundamentally** in how memory is allocated and how members are stored/used.

---

## 1) Memory Allocation

* **Structure (`struct`)**:
  *Each member gets its own separate memory location.*
  Total size = **sum of all members** (plus padding).
  All members can hold **valid values simultaneously**.

* **Union (`union`)**:
  *All members share the same memory location.*
  Total size = **maximum size of the largest member**.
  Only **one member is valid at a time**.

---

## 2) Syntax

```c
// Structure
struct Student {
    int roll;
    char name[20];
    float marks;
};

// Union
union Data {
    int i;
    float f;
    char str[20];
};
```

---

## 3) Example: Memory Difference

```c
#include <stdio.h>
struct S {
    int i;       // 4 bytes
    float f;     // 4 bytes
    char str[20];// 20 bytes
};

union U {
    int i;       // 4 bytes
    float f;     // 4 bytes
    char str[20];// 20 bytes
};

int main() {
    printf("Size of struct = %zu\n", sizeof(struct S));
    printf("Size of union  = %zu\n", sizeof(union U));
    return 0;
}
```

**Typical output (depends on compiler/padding):**

```
Size of struct = 28 (or 32 with padding)
Size of union  = 20
```

üëâ Structure size = **sum of all members**, Union size = **largest member only**.

---

## 4) Usage

* **Structure** ‚Üí use when **all fields are needed at once**.
  Example: Student record (`roll`, `marks`, `name` all required).

* **Union** ‚Üí use when **only one field is active at a time**, to save memory.
  Example: Value container (could be `int`, `float`, or `string`, but not all together).

---

## 5) Access Behavior

```c
struct S s = {101, 85.5, "Neel"};
printf("%d %.2f %s\n", s.i, s.f, s.str);  // ‚úÖ all valid

union U u;
u.i = 10;
printf("%d\n", u.i);   // valid
u.f = 3.14;
printf("%.2f\n", u.f); // valid
printf("%d\n", u.i);   // ‚ùå undefined now (i is overwritten)
```

---

## 6) Key Differences Table

| Feature               | Structure (`struct`)                          | Union (`union`)                              |
| --------------------- | --------------------------------------------- | -------------------------------------------- |
| **Memory allocation** | Separate memory for each member               | Shared memory for all members                |
| **Size**              | Sum of all members (+ padding)                | Size of largest member                       |
| **Value storage**     | All members can store values at the same time | Only one member valid at a time              |
| **Use case**          | Record with multiple fields active together   | Compact representation of ‚Äúone-of‚Äù choices   |
| **Access**            | Reading any member always valid               | Reading inactive member = undefined behavior |
| **Example**           | Student details (roll, name, marks)           | Variant data (int OR float OR string)        |

---

‚úÖ **In short:**

* Use **structure** when you need **all members together**.
* Use **union** when you need **memory efficiency** and **only one member is active at a time**.

---
