# 14.5: Nested Loops in C

A **nested loop** is a loop **inside another loop**.
You’ll use them to traverse **grids (2D arrays)**, print **patterns**, generate **tables**, and solve many real problems.

General form:

```c
for (outer_init; outer_cond; outer_upd) {
    for (inner_init; inner_cond; inner_upd) {
        // inner body
    }
    // outer body (after inner finishes one full run)
}
```

Think of a school timetable:

* **Outer loop** = day
* **Inner loop** = period slots inside that day

---

## 1) Print a 3×3 Grid (iteration trace)

```c
#include <stdio.h>
int main() {
    for (int r = 1; r <= 3; r++) {              // outer loop = rows
        for (int c = 1; c <= 3; c++) {          // inner loop = cols
            // Iteration trace:
            // r=1 → c=1,2,3 → prints (1,1) (1,2) (1,3)
            // r=2 → c=1,2,3 → prints (2,1) (2,2) (2,3)
            // r=3 → c=1,2,3 → prints (3,1) (3,2) (3,3)
            printf("(%d,%d) ", r, c);
        }
        printf("\n");                           // after inner loop ends
    }
    return 0;
}

```

**Output**

```
(1,1) (1,2) (1,3)
(2,1) (2,2) (2,3)
(3,1) (3,2) (3,3)
```

---

## 2) Right‑Angled Triangle (stars)

```c
int n = 4;
for (int r = 1; r <= n; r++) {
    for (int c = 1; c <= r; c++) {
        // r=1 → c=1 → *
        // r=2 → c=1,2 → **
        // r=3 → c=1,2,3 → ***
        // r=4 → c=1,2,3,4 → ****
        printf("*");
    }
    printf("\n");
}

```

**Output**

```
*
**
***
****
```

**Why it works:** for each row `r`, the inner loop prints exactly `r` stars.

---

## 3) Number Triangle (1…r per line)

```c
int n = 5;
for (int r = 1; r <= n; r++) {
    for (int c = 1; c <= r; c++) {
        // r=1 → print 1
        // r=2 → print 1 2
        // r=3 → print 1 2 3
        // r=4 → print 1 2 3 4
        // r=5 → print 1 2 3 4 5
        printf("%d ", c);
    }
    printf("\n");
}

```

**Output**

```
1
1 2
1 2 3
1 2 3 4
1 2 3 4 5
```

---

## 4) Multiplication Table (1..5 × 1..5)

```c
int max = 5;
for (int i = 1; i <= max; i++) {        // rows
    for (int j = 1; j <= max; j++) {    // cols
        // Iteration trace (row=2):
        // i=2 → j=1..5 → 2*1=2, 2*2=4, 2*3=6, 2*4=8, 2*5=10
        printf("%3d ", i * j);
    }
    printf("\n");
}

```

**Output (snippet)**

```
  1   2   3   4   5
  2   4   6   8  10
  3   6   9  12  15
  4   8  12  16  20
  5  10  15  20  25
```

---

## 5) 2D Array Traversal (marks matrix)

```c
#include <stdio.h>
int main() {
    int marks[2][3] = {
        {85, 90, 78},   // student 0
        {92, 88, 81}    // student 1
    };

    for (int stu = 0; stu < 2; stu++) {   // students
        int total = 0;
        for (int sub = 0; sub < 3; sub++) {   // subjects
            // stu=0 → sub=0,1,2 → values 85,90,78
            // stu=1 → sub=0,1,2 → values 92,88,81
            printf("S%d-Sub%d = %d  ", stu, sub, marks[stu][sub]);
            total += marks[stu][sub];
        }
        printf("| Total=%d Avg=%.2f\n", total, total/3.0);
    }
    return 0;
}
```

**Sample Output**

```
S0-Sub0 = 85  S0-Sub1 = 90  S0-Sub2 = 78  | Total=253 Avg=84.33
S1-Sub0 = 92  S1-Sub1 = 88  S1-Sub2 = 81  | Total=261 Avg=87.00
```

---

## 6) Search in a 2D Array (early exit with flags)

> `break` only exits the **inner** loop. Use a **flag** (or `goto`, sparingly) to stop both.

```c
int a[3][3] = {
    {5,  9, 11},
    {4, 13,  2},
    {7,  8, 10}
};
int key = 13, found = 0;

for (int r = 0; r < 3 && !found; r++) {
    for (int c = 0; c < 3; c++) {
        // Iteration trace:
        // r=0 → c=0..2 → 5,9,11 (no match)
        // r=1 → c=0 → 4 (no)
        // r=1 → c=1 → 13 (found!)
        if (a[r][c] == key) {
            printf("Found %d at (%d,%d)\n", key, r, c);
            found = 1;
            break;
        }
    }
}
if (!found) printf("Not found\n");

```

---

## 7) Patterns with Spaces (pyramid starter)

```c
int n = 4;
for (int r = 1; r <= n; r++) {
    // spaces:
    // r=1 → 3 spaces
    // r=2 → 2 spaces
    // r=3 → 1 space
    // r=4 → 0 space
    for (int s = 1; s <= n - r; s++) printf(" ");
    // stars:
    // r=1 → 1 star
    // r=2 → 3 stars
    // r=3 → 5 stars
    // r=4 → 7 stars
    for (int k = 1; k <= (2*r - 1); k++) printf("*");
    printf("\n");
}
```

**Output**

```
   *
  ***
 *****
*******
```

---

## 8) `while` inside `for` (and vice‑versa)

```c
// while inside for
for (int r = 1; r <= 3; r++) {
    int c = 1;
    while (c <= r) {
        printf("#");
        c++;
    }
    printf("\n");
}

// for inside while
int row = 3;
while (row--) {
    for (int k = 0; k < 3; k++) printf("@");
    printf("\n");
}
```

---

## 9) `break` and `continue` in nested loops

```c
// break: quits only the INNER loop
for (int r = 1; r <= 3; r++) {
    for (int c = 1; c <= 5; c++) {
        if (c == 3) break;   // prints c=1,2 then jumps to next row
        printf("(%d,%d) ", r, c);
    }
    printf("| row done\n");
}

// continue: skips to next inner iteration
for (int r = 1; r <= 2; r++) {
    for (int c = 1; c <= 5; c++) {
        if (c % 2 == 0) continue; // print only odd c
        printf("[%d,%d] ", r, c);
    }
    printf("\n");
}
```

---

## 10) Performance intuition (why it matters)

If the outer loop runs **N** times and the inner loop runs **M** times, total work ≈ **N × M**.

* Pattern printing with `n=100` → \~5,000 lines (fine).
* Triple‑nested loops (N×M×K) grow super fast → be mindful.

---

## 11) Common Pitfalls (and fixes)

1. **Not resetting the inner counter**

```c
for (int r = 1; r <= 3; r++) {
    int c = 1;               // ✅ re-init each row
    while (c <= 3) { c++; }
}
```

2. **Off‑by‑one in bounds**
   Use `< size` when indexing arrays `0..size-1`.

3. **Assuming `break` leaves both loops**
   It exits only the **nearest** loop. Use flags (shown above) or carefully structured logic.

4. **Heavy I/O inside deep loops**
   `printf` in huge loops can be slow. For performance tasks, compute first, print later.

---

## 12) Mini “CodingGita” Examples

### A) Attendance grid (P=present, A=absent)

```c
char att[2][4] = {
    {'P','A','P','P'},
    {'P','P','A','P'}
};
for (int stu = 0; stu < 2; stu++) {
    printf("Student %d: ", stu);
    for (int day = 0; day < 4; day++) printf("%c ", att[stu][day]);
    printf("\n");
}
```

### B) Heatmap of likes (rows = users, cols = posts)

```c
int likes[3][3] = { {1,0,1}, {0,1,1}, {1,1,0} };
int total = 0;
for (int u = 0; u < 3; u++)
    for (int p = 0; p < 3; p++)
        total += likes[u][p];
printf("Total likes = %d\n", total);
```

---

## 13) Quick Practice (try these)

1. Print a **hollow rectangle** of size `R×C`.
2. Given a `3×3` matrix, print the **sum of each row and column**.
3. Print an **inverted number triangle**:

   ```
   1 2 3 4
   1 2 3
   1 2
   1
   ```
4. Search a `4×4` matrix for a key; print **first position** (row, col) and stop immediately.
5. Build a **calendar‑like grid**: numbers 1..30 arranged in 7 columns.

---

## 14) Key Takeaways

* Nested loops = **outer repeats rows, inner repeats columns**.
* Perfect for **2D arrays, tables, and patterns**.
* Mind **bounds, re‑initialization, and early exits**.
* Complexity grows quickly: think **N×M** (or more).
* Use flags to **break out of multiple levels** cleanly.

---
