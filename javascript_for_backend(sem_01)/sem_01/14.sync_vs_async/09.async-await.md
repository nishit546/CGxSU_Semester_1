# Async / Await in JavaScript

## Why Async / Await?

`async / await` was introduced to make **asynchronous JavaScript look and behave like synchronous code**.

Promises solved callback hell, but:

* `.then()` chaining can still feel verbose
* Error handling is not always intuitive for beginners

`async / await` builds **on top of Promises** and provides:

* Cleaner syntax
* Better readability
* Easier error handling

---

## Important Rule (Must Know)

* `async` functions **always return a Promise**
* `await` can be used **only inside an async function**
* `await` pauses execution **without blocking the main thread**

---

## Example 1: Basic Async Function

```javascript
async function greet() {
  return "Hello from async function";
}

greet().then(function (message) {
  console.log(message);
});
```

Even though it looks synchronous, `greet()` returns a **Promise**.

---

## Example 2: Async/Await with `fetch` (Single API Call)

Let’s fetch products from FakeStore API.

```javascript
async function fetchProducts() {
  const response = await fetch("https://fakestoreapi.com/products");
  const data = await response.json();

  console.log("Products:", data);
}

fetchProducts();
```

### What’s Happening

1. `fetch()` returns a Promise
2. `await` waits for it to resolve
3. Code reads top-to-bottom like normal JS

No `.then()` chaining.

---

## Example 3: Error Handling with `try / catch`

With Promises, we used `.catch()`.
With async/await, we use `try / catch`.

```javascript
async function fetchProducts() {
  try {
    const response = await fetch("https://fakestoreapi.com/products");
    const data = await response.json();
    console.log(data);
  } catch (error) {
    console.log("Error occurred:", error);
  }
}

fetchProducts();
```

This feels very similar to synchronous error handling.

---

## Example 4: Sequential API Calls (Dependent Calls)

### Scenario

1. Fetch all products
2. Get first product ID
3. Fetch details of that product

```javascript
async function fetchFirstProductDetails() {
  try {
    const productsResponse = await fetch("https://fakestoreapi.com/products");
    const products = await productsResponse.json();

    const firstProductId = products[0].id;

    const productResponse = await fetch(
      "https://fakestoreapi.com/products/" + firstProductId
    );
    const productDetails = await productResponse.json();

    console.log("First Product Details:", productDetails);
  } catch (error) {
    console.log("Error:", error);
  }
}

fetchFirstProductDetails();
```

### Why This Is Powerful

* No nesting
* Clear execution order
* Easy to debug
* Very readable

---

## Example 5: Multiple Independent API Calls (`Promise.all` with async/await)

### Scenario

Fetch:

* All products
* All categories
  at the same time.

```javascript
async function fetchProductsAndCategories() {
  try {
    const [productsResponse, categoriesResponse] = await Promise.all([
      fetch("https://fakestoreapi.com/products"),
      fetch("https://fakestoreapi.com/products/categories")
    ]);

    const products = await productsResponse.json();
    const categories = await categoriesResponse.json();

    console.log("Products:", products);
    console.log("Categories:", categories);
  } catch (error) {
    console.log("Error:", error);
  }
}

fetchProductsAndCategories();
```

### Key Idea

* APIs run **in parallel**
* Faster than sequential `await`
* Best practice for independent tasks

---

## Example 6: Async/Await Inside Loops

### Scenario

Fetch details of first 3 products one by one.

```javascript
async function fetchMultipleProducts() {
  try {
    for (let i = 1; i <= 3; i++) {
      const response = await fetch(
        "https://fakestoreapi.com/products/" + i
      );
      const product = await response.json();
      console.log("Product", i, product.title);
    }
  } catch (error) {
    console.log("Error:", error);
  }
}

fetchMultipleProducts();
```

Important:

* `await` inside loop → **sequential execution**
* Good for dependent tasks

---

## Promise vs Async/Await (Quick Comparison)

| Promises           | Async / Await     |
| ------------------ | ----------------- |
| `.then()` chaining | Clean linear code |
| `.catch()`         | `try / catch`     |
| Harder to read     | Easier to read    |
| More verbose       | More concise      |

---

## Common Mistakes to Avoid

1. Using `await` outside async function
2. Forgetting `try / catch`
3. Using `await` in loops when parallel execution is needed
4. Assuming `await` blocks the main thread (it does not)

---

## Key Takeaways

* Async/await is built on Promises
* Makes async code readable and maintainable
* `await` pauses execution logically, not the thread
* Best choice for modern JavaScript projects

---
