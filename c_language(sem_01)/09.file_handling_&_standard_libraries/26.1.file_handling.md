# 26. File Handling in C 

In C, file handling allows a program to **store data permanently** in a file instead of only showing it on the screen.

All file operations in C are done using the **stdio.h** library.

---

## 1. Writing a simple word into a file

### Feature covered

* Creating a file
* Writing data into a file

### Code example

```c
#include <stdio.h>

int main() {
    FILE *fp;

    fp = fopen("data.txt", "w");

    if (fp == NULL) {
        printf("File could not be created");
        return 1;
    }

    fprintf(fp, "Hello");

    fclose(fp);

    printf("Data written successfully");
    return 0;
}
```

### What happens?

* If `data.txt` does not exist → it is **created**
* If it exists → old content is **removed**
* The word **Hello** is stored inside the file

### File content (`data.txt`)

```
Hello
```

---

## 2. Reading data from a file

### Feature covered

* Opening an existing file
* Reading data from a file

### Code example

```c
#include <stdio.h>

int main() {
    FILE *fp;
    char word[100];

    fp = fopen("data.txt", "r");

    if (fp == NULL) {
        printf("File not found");
        return 1;
    }

    fgets(word, sizeof(word), fp);

    printf("Data from file: %s", word);

    fclose(fp);
    return 0;
}
```

### Output

```
Data from file: Hello
```

### Important rule

* `"r"` mode **does not create** a file
* File **must exist**, otherwise `fopen` returns `NULL`

---
## 2.1. Reading data from a file, multiple lines

### Feature covered

* Opening an existing file
* Reading multiple lines from a file

### Code example

---
```
#include <stdio.h>

int main() {
    FILE *fp;
    char buffer[1000];

    fp = fopen("data.txt", "r");

    if (fp == NULL) {
        printf("File not found\n");
        return 1;
    }

    while (fgets(buffer, sizeof(buffer), fp) != NULL) {
        printf("%s", buffer);
    }

    fclose(fp);
    return 0;
}
```
---

## 3. Editing file content (overwrite)

In C, **editing** means:

> Open the file again in **write mode** and write new data

### Feature covered

* Overwriting file content

### Code example

```c
#include <stdio.h>

int main() {
    FILE *fp;

    fp = fopen("data.txt", "w");

    if (fp == NULL) {
        printf("File error");
        return 1;
    }

    fprintf(fp, "Welcome");

    fclose(fp);

    printf("File updated successfully");
    return 0;
}
```

### File content after running program

```
Welcome
```

### Key point

* `"w"` mode **always removes old data**
* Old word `Hello` is replaced by `Welcome`

---

## 4. Adding data to an existing file (append)

### Feature covered

* Adding new data **without removing old data**

### Code example

```c
#include <stdio.h>

int main() {
    FILE *fp;

    fp = fopen("data.txt", "a"); 
    
    if (fp == NULL) {
        printf("File error");
        return 1;
    }

    fprintf(fp, " Students");

    fclose(fp);

    printf("Data appended successfully");
    return 0;
}
```

### File content now

```
Welcome Students
```

### Difference between modes

* `"w"` → overwrite everything
* `"a"` → add data at the end

---

## 5. Deleting a file

### Feature covered

* Removing a file from the system

### Code example

```c
#include <stdio.h>

int main() {

    if (remove("data.txt") == 0) {
        printf("File deleted successfully");
    } else {
        printf("File could not be deleted");
    }

    return 0;
}
```

### What happens?

* File `data.txt` is **permanently removed**
* Cannot be recovered using C program

---

## 6. Summary of file handling features 

| Task                | Function / Mode          |
| ------------------- | ------------------------ |
| Create / Write file | `fopen("file.txt", "w")` |
| Read file           | `fopen("file.txt", "r")` |
| Edit (overwrite)    | `"w"` mode               |
| Add data            | `"a"` mode               |
| Close file          | `fclose()`               |
| Delete file         | `remove()`               |

---

## Important rules 

* Always check `fopen()` result
* Always close the file using `fclose()`
* Use:

  * `"w"` → new file / overwrite
  * `"r"` → read existing file
  * `"a"` → add data
* File handling is used for:

  * Saving student data
  * Storing marks
  * Logs
  * Permanent storage

---
